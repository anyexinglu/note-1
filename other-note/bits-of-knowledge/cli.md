# 背景

记录下最近遇到的一些问题，最近在为项目写 cli 工具，为什么需要这个 cli 工具，是因为这个项目可以用来拖拽生成页面，通过拖拽生成页面，把页面的 `json` 数据同步到本地环境。但是在页面上创建项目，以及创建一些菜单的时候都是需要权限的。比如 A 项目菜单的读取需要属于 A 项目的成员才可以拿到菜单信息。在网页中是通过一些授权方式拿到 cookie 然后发送到服务端来识别对应的角色。
但是在 node 端请求接口，如果没有一些身上识别信息的话，很难去识别哪个人哪个角色。所以基于这样的背景，目前想到的三个解决方案

## 方案一： 仍然使用 cli 的形式

仍然使用 cli 的形式，但是这样如何来识别用户呢？那就是为每个用户提供额外的一个 token (也可以叫做其他的)，在网页上点击生成 `token` 后，用户把 token 放在本地项目的一个配置文件里，比如叫 `token.js`, 这个文件是需要被 `ignore` 掉的。在调用一些 cli 命令的时候携带上这个 token 来进行识别。但是切记 `token 不能泄露`

缺点：这样做的缺点就是项目内的每个成员都需要配置自己额外的 `token.js`, 并且 token 被别人知道后，很容易数据被窃取

## 方案二：本地启动一个 node 服务

当在网页上创建了一个新的页面后，此时在页面上点击 `update` 按钮，就会发送请求到本地的 node 服务，本地的服务接收到请求后，开始执行一些操作，比如文件修改，删除等。这样不需要额外的 token 即可达到要求。

缺点：需要用户主动在页面上点击某个按钮来操作，每个用户都要这样来操作一遍，可能会很繁琐。

## 方案三：vscode 插件

如果是通过 vscode 开发项目则可以提供 vscode 插件，通过插件来更新项目，用户只需要安装插件即可

缺点：同样插件也需要有来自页面的消息的通知，收到通知后来更新文件。
