# 小程序开发总结

这几天一直在开发小程序的业务，学习到了好多东西。在这里主要针对开发业务的一些总结。

## 业务思考

1. 在开发业务的时候，需要对业务进行充分的评估，防止到了上线时间才发现某些链路是走不通的，如果没有一些兜底策略，那么就会 delay 这个需求的
   上线流程。那么产品会对你不满意，相应的技术老大也会不满意。

2. 要善用脑图梳理出业务相应的状态节点，当梳理出状态节点就会更加容易的组织代码。千万不要拿到需求就开始无脑的写，好的组织结构的代码不仅可以
   加快写业务的速度，对于后期的维护也是有很大的好处的。

3. 整理完状态后，梳理各个链路的关键节点，当自己不确定某些交互是否可行的时候，一定要及时提出来或者问相关懂的人，这样可以提前发现问题并且解决问题，防止造成需求的 delay。

4. 移动端的研发兼容性问题很重要，稍有不甚，代码就要修改很多很多。

## 额外思考

1. 安抚组员的情绪以及给与其他方面的帮助，当需求上线非常急切，大家又每天不断不断的加班，这样不免会生出异样的情绪，因此一定要安抚一下大家的情绪。

2. 针对每个需求做完后，要有自己的思考和总结，很多人都处于这样一个困境就是做需求做需求做需求，每天不断这样，实际上在每个需求后，需要留出时间对本次的
   需求做出总结以及相应的复盘，这样才能随着一起进步，作为负责人更应该如此。

3. 在经历过长时间的加班战斗后，要为一起奋斗的组员争取一些好处，比如这两天留给大家总结和学习，休息一下。这样大家的就不会陷入需求的死循环中，也不会有其他不好的情绪，也能进步。多赢的结果。

## 技术思考

本地小程序开发主要是使用 `Taro` 来开发小程序，同时也需要编译为 H5，因为在开发中遇到了很多问题，在这里记录一下

- Taro 中 style 如果写的是数字，编译为 H5 则会被抹掉

```tsx
❎  <View style={{ width: 50 }} />
```

此时的 `width` 会被抹掉， 正确的做法写成字符串或者带上单位

```tsx
<View style="width: 50"/>  //✅
<View style={{ width: '50px' }}/> // ✅
```

<!-- TODO -->

至于为什么小程序编译为 h5 会丢失，以及为什么这么处理，后续会在这里进行补充

- Taro 在 effect 中通过 query 的形式会获取不到元素的尺寸信息

小程序和 React 是不同的，在 React 的 useEffect 中，dom 元素已经渲染完成，可以准确拿到 dom 信息。但是在小程序中双线程的缘故

<!-- TODO 补充 -->
